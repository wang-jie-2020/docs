# 环境和配置

约定配置, 主要方向:

- 配置源(PropertySource Sequences, 如配置数据、OS、命令行等)

- 程序参数模型绑定, 简单类型, 对象类型

- 条件限定

## 配置源

1. 理解如下顺序(略过了些), @PropertySource -> 默认Config -> OS -> 命令行

2. 默认Config命名bootstrap > application, 默认Config格式properties > yml

3. 代码资源的其他配置项

   @PropertySource(value = "classpath:mail.properties")

   spring.config.import=optional:file:./dev.properties

4. Profile

   spring.profiles.active=

   spring.config.activate.on-profile=

## 装配

1. @Value("${property}"

2. Java Bean (@ConfigurationProperties)

其中@Value还能支持spEL表达式(在配置上如此感觉多余), 重要注解:

@ConfigurationProperties(prefix = "")

@Profile("dev")(spring.config.activate.on-profile=dev,spring.profiles.active=dev)


## 条件限定(Property Conditions)

@ConditionalOnProperty(prefix = "",name = "",havingValue="")

@ConditionalOnMissBean