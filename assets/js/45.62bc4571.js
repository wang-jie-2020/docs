(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{337:function(t,e,r){"use strict";r.r(e);var a=r(1),i=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"auth"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#auth"}},[t._v("#")]),t._v(" auth")]),t._v(" "),e("p",[t._v("springboot 下考虑 spring.security")]),t._v(" "),e("p",[t._v("ssh或ssm 下考虑shiro")]),t._v(" "),e("h2",{attrs:{id:"springsecurity"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#springsecurity"}},[t._v("#")]),t._v(" SpringSecurity")]),t._v(" "),e("p",[t._v("(难度中等,细节太多)")]),t._v(" "),e("ol",[e("li",[t._v("代理Security过滤器链,在Servlet过滤器链中Adapte SpringContext")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wang-jie-2020/images/v2-e8db1153feba42975920dc7d1c33661f_720w.webp",alt:"img"}})]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("路径匹配过Security过滤器链")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wang-jie-2020/images/v2-700d7fdce90099c6f2d4c9873eaa5259_720w.webp",alt:"img"}})]),t._v(" "),e("p",[t._v("(一个示例,感觉不是非常匹配)")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wang-jie-2020/images/a9c87d1851a94259ac2c603e75c39b2c.png",alt:"img"}})]),t._v(" "),e("h3",{attrs:{id:"authenticationmanager"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#authenticationmanager"}},[t._v("#")]),t._v(" AuthenticationManager")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wang-jie-2020/images/a7013f51aa6d4cc88468e4d1ab93c888.png",alt:"在这里插入图片描述"}})]),t._v(" "),e("h3",{attrs:{id:"securitycontextholder-securitycontextholderstrategy"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#securitycontextholder-securitycontextholderstrategy"}},[t._v("#")]),t._v(" SecurityContextHolder & SecurityContextHolderStrategy")]),t._v(" "),e("p",[t._v("在认证成功后，"),e("code",[t._v("AbstractAuthenticationProcessingFilter")]),t._v(" 会将认证成功的"),e("code",[t._v("Authentication")]),t._v(" 放到"),e("code",[t._v("SecurityContext")]),t._v("当中。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wang-jie-2020/images/v2-ccd782380492892f01fcdca08a5eebd7_720w.webp",alt:"img"}})]),t._v(" "),e("p",[e("code",[t._v("SecurityContextHolderStrategy")]),t._v("：")]),t._v(" "),e("p",[t._v("​\tMODE_THREADLOCAL\t\t\t\t默认")]),t._v(" "),e("p",[t._v("​\tMODE_INHERITABLETHREADLOCAL\t 可继承")]),t._v(" "),e("p",[t._v("​\tMODE_GLOBAL\t\t\t\t\t 全局")]),t._v(" "),e("h3",{attrs:{id:"securitycontextholderfilter-securitycontextrepository"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#securitycontextholderfilter-securitycontextrepository"}},[t._v("#")]),t._v(" SecurityContextHolderFilter & SecurityContextRepository")]),t._v(" "),e("p",[t._v("SecurityContextHolderFilter")]),t._v(" "),e("p",[t._v("​\tSecurityContextRepository")]),t._v(" "),e("p",[t._v("​\t\tHttpSessionSecurityContextRepository")]),t._v(" "),e("p",[t._v("​\t\tRequestAttributeSecurityContextRepository")]),t._v(" "),e("p",[t._v("​\t\tNullSecurityContextRepository\t<-- jwt")]),t._v(" "),e("h3",{attrs:{id:"preauthorize"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#preauthorize"}},[t._v("#")]),t._v(" @preAuthorize")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[e("strong",[t._v("表达式")])]),t._v(" "),e("th",[e("strong",[t._v("描述")])])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("hasRole([role])")]),t._v(" "),e("td",[t._v("当前用户是否拥有指定角色。")])]),t._v(" "),e("tr",[e("td",[t._v("hasAnyRole([role1,role2])")]),t._v(" "),e("td",[t._v("多个角色是一个以逗号进行分隔的字符串。如果当前用户拥有指定角色中的任意一个则返回true。")])]),t._v(" "),e("tr",[e("td",[t._v("hasAuthority([auth])")]),t._v(" "),e("td",[t._v("等同于hasRole")])]),t._v(" "),e("tr",[e("td",[t._v("hasAnyAuthority([auth1,auth2])")]),t._v(" "),e("td",[t._v("等同于hasAnyRole")])]),t._v(" "),e("tr",[e("td",[t._v("Principle")]),t._v(" "),e("td",[t._v("代表当前用户的principle对象")])]),t._v(" "),e("tr",[e("td",[t._v("authentication")]),t._v(" "),e("td",[t._v("直接从SecurityContext获取的当前Authentication对象")])]),t._v(" "),e("tr",[e("td",[t._v("permitAll")]),t._v(" "),e("td",[t._v("总是返回true，表示允许所有的")])]),t._v(" "),e("tr",[e("td",[t._v("denyAll")]),t._v(" "),e("td",[t._v("总是返回false，表示拒绝所有的")])]),t._v(" "),e("tr",[e("td",[t._v("isAnonymous()")]),t._v(" "),e("td",[t._v("当前用户是否是一个匿名用户")])]),t._v(" "),e("tr",[e("td",[t._v("isRememberMe()")]),t._v(" "),e("td",[t._v("表示当前用户是否是通过Remember-Me自动登录的")])]),t._v(" "),e("tr",[e("td",[t._v("isAuthenticated()")]),t._v(" "),e("td",[t._v("表示当前用户是否已经登录认证成功了。")])]),t._v(" "),e("tr",[e("td",[t._v("isFullyAuthenticated()")]),t._v(" "),e("td",[t._v("如果当前用户既不是一个匿名用户，同时又不是通过Remember-Me自动登录的，则返回true。")])])])])])}),[],!1,null,null,null);e.default=i.exports}}]);