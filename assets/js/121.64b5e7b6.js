(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{443:function(s,a,t){"use strict";t.r(a);var n=t(4),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"bash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bash"}},[s._v("#")]),s._v(" bash")]),s._v(" "),a("h3",{attrs:{id:"编码问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编码问题"}},[s._v("#")]),s._v(" 编码问题")]),s._v(" "),a("p",[s._v("通常都会注意到行分隔符的问题,即windows的crlf与unix的lf。但很容易忽略脚本编码,utf8和utf8bom,表现是bash的首行 "),a("code",[s._v("#!/usr/bin/bash")]),s._v("即报找不到路径")]),s._v(" "),a("p",[s._v("通过cat -A可以查看")]),s._v(" "),a("p",[s._v("bash参数，一些常见的bash判断")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$# 是传给脚本的参数个数\n$``0` `是脚本本身的名字\n$``1` `是传递给该shell脚本的第一个参数\n$``2` `是传递给该shell脚本的第二个参数\n$@ 是传给脚本的所有参数的列表\n$* 是以一个单字符串显示所有向脚本传递的参数，与位置变量不同，参数可超过``9``个\n$$ 是脚本运行的当前进程ID号\n$? 是显示最后命令的退出状态，``0``表示没有错误，其他表示有错误\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前路径")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DIR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$( cd "'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dirname")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("BASH_SOURCE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\t\n\n# 获取参数\nwhile [[ '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v(' -gt 0 ]]; do\n    opt="')]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("--"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("-}")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print tolower($0)}'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\n    case "')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$opt")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" in\n        -\\?|-h|-help)\n            __usage --no-exit\n            exit 0\n            ;;\n        -tar|-t)\n            shift\n            tar_name="')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),s._v("}")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\n            [ -z "')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$tar_name")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" ] && __error "')]),s._v("Missing value "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" parameter --tar"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" && __usage\n            ;;\n        -build|-b)\n            run_build=true\n            ;;\n        *)\n            other_args['),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("other_args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),s._v(']="')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\n            ;;\n    esac\n    shift\ndone\n\n# 循环执行数组\n  while [ '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$index")]),s._v(" -lt "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("target_machine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),s._v(" ]\n  do\n    scp "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$image_tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${target_machine_username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("$index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${target_machine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("$index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${target_machine_dir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("$index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),s._v('\n    "')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("let")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("index")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否为空")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-z")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$tar_name")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  __error "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Missing value for parameter --tar"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" __usage\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$run_build")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br")])]),a("p",[s._v("字符串处理，bash脚本的字符串是直接不含运算符拼接的")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  %和#表示方向")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("identifier")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${tar_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%%")]),s._v(".*}")]),s._v("\t\t\t从右边,最后一个.以及之后的不要\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("identifier")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${identifier"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("-lims}")]),s._v("\t\t从右边,第一个-lims不要\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("identifier")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${identifier"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("lims-}")]),s._v("\t\t从左边,第一个lims-不要\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("build_image_tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${build_tar_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%%")]),s._v(".*}")]),s._v("\t\t右边最后一个.之后的不要\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("build_image_tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${build_image_tag"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("##")]),s._v("*-}")]),s._v("\t\t坐标最后一个-之前的不要\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"时间戳"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#时间戳"}},[s._v("#")]),s._v(" 时间戳")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y%m%d%H%M%S"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"网络查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络查询"}},[s._v("#")]),s._v(" 网络查询")]),s._v(" "),a("div",{staticClass:"language-功能 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("netstat -ano\n\nstrace\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh"}},[s._v("#")]),s._v(" ssh")]),s._v(" "),a("h3",{attrs:{id:"windows上的ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows上的ssh"}},[s._v("#")]),s._v(" windows上的ssh")]),s._v(" "),a("p",[s._v("个人版中通过store可以下载适配于windows的ssh.exe或者直接作为可选功能在程序管理中启用.")]),s._v(" "),a("p",[s._v("server版安装离线包或者安装git")]),s._v(" "),a("h3",{attrs:{id:"ssh远程执行的坑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh远程执行的坑"}},[s._v("#")]),s._v(" SSH远程执行的坑")]),s._v(" "),a("p",[s._v("场景:通过机器A远程机器B,执行A中的脚本("),a("strong",[s._v("前提:机器B未作任何配置,非root")]),s._v(")")]),s._v(" "),a("p",[s._v("问题:执行sudo命令'[sudo: no tty present and no askpass program specified]'")]),s._v(" "),a("p",[s._v("查询资料的理解是当SSH远程执行时默认不分配模拟终端,通过-t以及-tt可以强制分配")]),s._v(" "),a("p",[s._v("不能执行的写法:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不行")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" name@ip "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\n      echo "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$para")]),s._v("\n      sudo docker ps\nEOF")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不行,注意此种方式需要传递参数")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" name@ip "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sudo bash -s'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" ./deploy_build.sh para1 para2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("可以执行的写法")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" name@ip "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\n      echo '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$para")]),s._v('\n      sudo docker ps\n    "')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"sudo免密切换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sudo免密切换"}},[s._v("#")]),s._v(" sudo免密切换")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("切换目录到"),a("em",[s._v("etc")]),s._v("下")])]),s._v(" "),a("li",[a("p",[s._v("查看"),a("em",[s._v("sudoers")]),s._v("权限")])]),s._v(" "),a("li",[a("p",[s._v("修改"),a("em",[s._v("sudoers")]),s._v("权限,加入可写权限")])]),s._v(" "),a("li",[a("p",[s._v("打开修改文件配置")]),s._v(" "),a("p",[a("code",[s._v("xx ALL=(ALL) NOPASSWD: ALL")])])]),s._v(" "),a("li",[a("p",[s._v("修改"),a("em",[s._v("sudoers")]),s._v("权限删除可写权限")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" sudoers\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +w sudoers\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" sudoers\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" sudoers\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"ssh免密登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh免密登录"}},[s._v("#")]),s._v(" ssh免密登录")]),s._v(" "),a("p",[s._v("sshpass这种还是不考虑,正统的方式是写公钥")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ssh-keygen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v("\nssh-copy-id "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" ~/.ssh/id_rsa.pub user@server.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"tar"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tar"}},[s._v("#")]),s._v(" tar")]),s._v(" "),a("h3",{attrs:{id:"tar-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tar-options"}},[s._v("#")]),s._v(" tar options")]),s._v(" "),a("p",[s._v("-c：（create）建立打包文件")]),s._v(" "),a("p",[s._v("-x：解打包或解压缩的功能，可以搭配-C(大写)在特定目录解开")]),s._v(" "),a("p",[s._v("-t ：查看打包文件的内容含有哪些文件")]),s._v(" "),a("p",[s._v("-v ：在压缩/解压缩的过程中，将正在处理的文件名显示出来")]),s._v(" "),a("p",[s._v("-j ：通过bzip2的支持进行压缩/解压缩，此时文件最好为*.tar.bz2")]),s._v(" "),a("p",[s._v("-z ：通过gzip的支持进行压缩/解压缩，此时文件最好为*.tar.gz")]),s._v(" "),a("p",[s._v("-f filename：-f 后面跟处理后文件的全名称（路径+文件名+后缀名）")]),s._v(" "),a("p",[s._v("-C 目录：这个选项用在解压缩，若要在特定目录解压缩，可以使用这个选项")]),s._v(" "),a("p",[s._v("-p：保留备份数据的原本权限与属性，常用于备份(-c)重要的配置文件")]),s._v(" "),a("p",[s._v("--exclude=FILE:排除某些文件")]),s._v(" "),a("h3",{attrs:{id:"faq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[s._v("#")]),s._v(" FAQ")]),s._v(" "),a("p",[s._v("打tar包时指定相对路径或绝对路径的问题,按照期望打包结果通常是相对路径")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DST")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Get-Date "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Format")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yyyyMMddhhmmss"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$TAR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-join")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lims"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DST")]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".tar.gz"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-czvf")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$TAR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-C")]),s._v(" ."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("outputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("result *\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#管理"}},[s._v("#")]),s._v(" 管理")]),s._v(" "),a("p",[s._v("ps -ef")]),s._v(" "),a("p",[s._v("free -h")])])}),[],!1,null,null,null);a.default=e.exports}}]);