(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{429:function(t,a,s){"use strict";s.r(a);var e=s(4),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器"}},[t._v("#")]),t._v(" 容器")]),t._v(" "),a("p",[t._v("ApplicationContext也是一个可注入对象: 直接通过注解注入ApplicationContext类型 或者 实现ApplicationContextAware")]),t._v(" "),a("p",[t._v("2.1 指定基类型的多个实现")]),t._v(" "),a("p",[t._v("​\t"),a("T",[t._v(" Map<String, T> getBeansOfType(@Nullable Class"),a("T",[t._v(" var1);")])],1)],1),t._v(" "),a("p",[t._v("2.2 Bean上的注解")]),t._v(" "),a("p",[t._v("​\t"),a("A",{attrs:{extends:"",Annotation:""}},[t._v(" A findAnnotationOnBean(String var1, Class"),a("A",[t._v(" var2);")])],1)],1),t._v(" "),a("p",[t._v("Q: 通过注解配置Bean时 会默认有哪些BeanDefinition?")]),t._v(" "),a("p",[t._v("​\tC extends A implements B\t-> [AC BC]")]),t._v(" "),a("p",[t._v("​\tC extends A, A implements B\t-> [AC]")]),t._v(" "),a("h2",{attrs:{id:"swagger版本问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#swagger版本问题"}},[t._v("#")]),t._v(" swagger版本问题")]),t._v(" "),a("p",[t._v("springboot2.5不需要额外配置")]),t._v(" "),a("p",[t._v("springboot2.6以上报错,需要额外补入MVC配置,二选一")]),t._v(" "),a("p",[t._v("​\t@EnableMVC")]),t._v(" "),a("p",[t._v("​\tspring.mvc.pathmatch.strategy="),a("em",[t._v("ant_path_matcher")])]),t._v(" "),a("h2",{attrs:{id:"springsecurity-跨域配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#springsecurity-跨域配置"}},[t._v("#")]),t._v(" SpringSecurity 跨域配置")]),t._v(" "),a("p",[t._v("在spring-mvc中的WebMvcConfigurer.addCorsMappings()中可以做到跨域, 但一旦和SpringSecurity结合使用就不能正常运行,这个结果是因为SpringSecurity注册的过滤器拦截了跨域的预检请求(到不了mvc中)")]),t._v(" "),a("p",[t._v("1.不使用mvc的配置,而是通过CorsFilter的Bean")]),t._v(" "),a("p",[t._v("2.httpSecurity.addFilterBefore(corsFilter, JwtAuthenticationTokenFilter.class);")]),t._v(" "),a("p",[t._v('@PreAuthorize("permitAll")注解还是会拦截401')]),t._v(" "),a("p",[t._v("内部机制问题,由httpSecurity.anyRequest().authenticated()引起")]),t._v(" "),a("p",[t._v("有点莫名其妙..., 网上的回答更加莫名其妙...")]),t._v(" "),a("h2",{attrs:{id:"binding注解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#binding注解"}},[t._v("#")]),t._v(" Binding注解")]),t._v(" "),a("p",[t._v("在不注解时,默认当URL参数处理;当然form表单会有额外;")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("FromQuery")]),t._v(" "),a("td",[t._v("RequestParam ("),a("s",[t._v("PathParam")]),t._v(")")])]),t._v(" "),a("tr",[a("td",[t._v("FromRoute")]),t._v(" "),a("td",[t._v("PathVariable")])]),t._v(" "),a("tr",[a("td",[t._v("FromHeader")]),t._v(" "),a("td",[t._v("RequestHeader")])]),t._v(" "),a("tr",[a("td",[t._v("FromBody")]),t._v(" "),a("td",[t._v("RequestBody")])]),t._v(" "),a("tr",[a("td",[t._v("FromForm")]),t._v(" "),a("td",[t._v("RequestParam 或缺省?")])])])]),t._v(" "),a("h2",{attrs:{id:"httpcontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#httpcontext"}},[t._v("#")]),t._v(" HttpContext")]),t._v(" "),a("p",[t._v("通过请求参数中获取 Request 对象；")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("通过 RequestContextHolder 获取 Request 对象；")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletRequestAttributes")]),t._v(" servletRequestAttributes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletRequestAttributes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestContextHolder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRequestAttributes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" servletRequestAttributes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("通过自动注入获取 Request 对象;")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 自动注入 request 对象")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h2",{attrs:{id:"配置文件加载的优先级-由高到低"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件加载的优先级-由高到低"}},[t._v("#")]),t._v(" 配置文件加载的优先级（由高到低）")]),t._v(" "),a("p",[a("code",[t._v("bootstrap.properties ->bootstrap.yml -> application.properties -> application.yml")])]),t._v(" "),a("h2",{attrs:{id:"import"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#import"}},[t._v("#")]),t._v(" Import")]),t._v(" "),a("p",[t._v("(1) @Import注解")]),t._v(" "),a("p",[t._v("(2) src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports")]),t._v(" "),a("h2",{attrs:{id:"refreshscope"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#refreshscope"}},[t._v("#")]),t._v(" @RefreshScope")]),t._v(" "),a("p",[t._v("配置刷新")]),t._v(" "),a("h2",{attrs:{id:"lombok"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lombok"}},[t._v("#")]),t._v(" Lombok")]),t._v(" "),a("p",[t._v("@RequiredArgsConstructor")]),t._v(" "),a("h2",{attrs:{id:"jar"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jar"}},[t._v("#")]),t._v(" Jar")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("@echo off\necho.\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("信息"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" 使用Jar命令运行Gateway工程。\necho.\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" %~dp0\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/ruoyi-gateway/target\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JAVA_OPTS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("-Xms512m "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Xmx1024m")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:MetaspaceSize")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("128m "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:MaxMetaspaceSize")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("512m\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Dfile.encoding")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf-8 %JAVA_OPTS% "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-jar")]),t._v(" ruoyi-gateway.jar\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" bin\npause\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("p",[t._v("-Xms分配堆最小内存，默认为物理内存的1/64；-Xmx分配最大内存，默认为物理内存的1/4。\n非堆内存分配用-XX:PermSize和-XX:MaxPermSize")]),t._v(" "),a("p",[t._v("-XX:PermSize分配非堆最小内存，默认为物理内存的1/64；-XX:MaxPermSize分配最大内存，默认为物理内存的1/4。")]),t._v(" "),a("h2",{attrs:{id:"测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[t._v("#")]),t._v(" 测试")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SpringBootTest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("classes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConfigurationExampleApplication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" properties "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"--mail.enabled=true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"--spring.profiles.active=dev,extra"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);