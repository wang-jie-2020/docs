(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{426:function(v,_,t){"use strict";t.r(_);var p=t(4),e=Object(p.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"雪花"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#雪花"}},[v._v("#")]),v._v(" 雪花")]),v._v(" "),_("blockquote",[_("p",[v._v("结构如下(每部分用-分开)")]),v._v(" "),_("p",[v._v("0 - 0000000000 0000000000 0000000000 0000000000 0 - 00000 - 00000 - 000000000000")]),v._v(" "),_("p",[v._v("1位标识")]),v._v(" "),_("p",[v._v("​\t最高位是符号位是0")]),v._v(" "),_("p",[v._v("41位时间截(毫秒级)")]),v._v(" "),_("p",[v._v("​\t时间截不是存储当前时间的时间截，而是存储时间截的差值（当前时间截 - 开始时间截)得到的值）")]),v._v(" "),_("p",[v._v("​\t41位的时间截，可以使用69年，年T = (1L << 41) / (1000L * 60 * 60 * 24 * 365) = 69")]),v._v(" "),_("p",[v._v("10位的数据机器位")]),v._v(" "),_("p",[v._v("​\t1024个节点")]),v._v(" "),_("p",[v._v("12位序列")]),v._v(" "),_("p",[v._v("​\t毫秒内的计数，12位的计数顺序号支持每个节点每毫秒(同一机器，同一时间截)产生4096个ID序号")])]),v._v(" "),_("p",[v._v("实现算法描述:")]),v._v(" "),_("p",[v._v("时间戳\t<< \t22\t|")]),v._v(" "),_("p",[v._v("机器码\t<<\t 12\t|")]),v._v(" "),_("p",[v._v("序列码")]),v._v(" "),_("p",[v._v("00000000-00000000-00000000-00000000-00000000-00000000-00000000-00000000")]),v._v(" "),_("p",[v._v("00000000-00000000-00000001-11111111-11111111-11111111-11111111-11111111\t<< 22")]),v._v(" "),_("p",[v._v("01111111-11111111-11111111-11111111-11111111-11000000-00000000-00000000")]),v._v(" "),_("p",[v._v("00000000-00000000-00000000-00000000-00000000-00000000-00000011-11111111\t<< 12")]),v._v(" "),_("p",[v._v("00000000-00000000-00000000-00000000-00000000-00111111-11110000-00000000")]),v._v(" "),_("p",[v._v("00000000-00000000-00000000-00000000-00000000-00000000-00001111-11111111")]),v._v(" "),_("blockquote",[_("p",[v._v("IEEE 754 双精度浮点数使用 64 位来表示 3 个部分：")]),v._v(" "),_("ul",[_("li",[v._v("1 比特"),_("em",[v._v("符号位")]),v._v("（sign）（正数或者负数）")]),v._v(" "),_("li",[v._v("11 比特"),_("em",[v._v("指数位")]),v._v("（exponent）（-1022 到 1023）")]),v._v(" "),_("li",[v._v("52 比特"),_("em",[v._v("尾数位")]),v._v("（mantissa）（表示 0 和 1 之间的数值）")])])]),v._v(" "),_("p",[v._v("这意味着在表示整数时,NUMBER类型最大提供54个bit,与LONG类型的64bit相比存在精度损失")]),v._v(" "),_("p",[_("em",[v._v("0 + 41**位时间戳")]),v._v(" "),_("em",[v._v("+ 10**位机器码")]),v._v(" "),_("em",[v._v("+ 12**位序列码")]),v._v("\t---\x3e")]),v._v(" "),_("p",[_("em",[v._v("0 + 40**位时间戳")]),v._v(" "),_("em",[v._v("+ 2**位机器码")]),v._v(" "),_("em",[v._v("+ 11**位序列码")])]),v._v(" "),_("p",[v._v("时间戳68年--\x3e时间戳34年")]),v._v(" "),_("p",[v._v("机器码1024--\x3e机器码4")]),v._v(" "),_("p",[v._v("序列数4096--\x3e序列数2048")]),v._v(" "),_("p",[v._v("时间戳\t<< \t13\t|")]),v._v(" "),_("p",[v._v("机器码\t<<\t 11\t|")]),v._v(" "),_("p",[v._v("序列码")]),v._v(" "),_("p",[v._v("Nuget：https://github.com/yitter/IdGenerator")])])}),[],!1,null,null,null);_.default=e.exports}}]);