(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{433:function(a,s,t){"use strict";t.r(s);var e=t(5),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("--mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.slf4j.Slf4jImpl")]),a._v(" "),s("h2",{attrs:{id:"jar"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jar"}},[a._v("#")]),a._v(" Jar")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("@echo off\necho.\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("信息"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 使用Jar命令运行Gateway工程。\necho.\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" %~dp0\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/ruoyi-gateway/target\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("JAVA_OPTS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("-Xms512m "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xmx1024m")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-XX:MetaspaceSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("128m "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-XX:MaxMetaspaceSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("512m\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dfile.encoding")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("utf-8 %JAVA_OPTS% "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" ruoyi-gateway.jar\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" bin\npause\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br")])]),s("p",[a._v("-Xms分配堆最小内存，默认为物理内存的1/64；-Xmx分配最大内存，默认为物理内存的1/4。\n非堆内存分配用-XX:PermSize和-XX:MaxPermSize")]),a._v(" "),s("p",[a._v("-XX:PermSize分配非堆最小内存，默认为物理内存的1/64；-XX:MaxPermSize分配最大内存，默认为物理内存的1/4。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("  -XX:+UseContainerSupport -XX:InitialRAMPercentage=60.0\n  -XX:MaxRAMPercentage=60.0 -XX:MetaspaceSize=256M\n  -XX:MaxMetaspaceSize=256M -XX:NewRatio=1 -XX:SurvivorRatio=4\n  -XX:NativeMemoryTracking=summary -XX:+PrintGCDetails\n  -XX:+PrintGCDateStamps -XX:+PrintGCCause -XX:+UseGCLogFileRotation \n  -XX:+PrintHeapAtGC -XX:NumberOfGCLogFiles=5 -XX:GCLogFileSize=20M \n  -Xloggc:/app/logs/gc-%t.log -XX:+HeapDumpOnOutOfMemoryError \n  -XX:HeapDumpPath=/app/logs/\n")])])]),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 1. 查找目标Java进程PID")]),a._v("\njps "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 2. 使用jmap导出")]),a._v("\njmap -dump:live,format"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("b,file"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("heap.hprof "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("PID"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 3. 压缩文件（可选）")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("gzip")]),a._v(" heap.hprof\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## jcmd <PID> GC.heap_dump <文件路径>")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## curl -X POST http://localhost:8080/actuator/heapdump -o heapdump.hprof")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br")])]),s("h2",{attrs:{id:"spring"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring"}},[a._v("#")]),a._v(" Spring")]),a._v(" "),s("p",[a._v("ApplicationContext也是一个可注入对象: 直接通过注解注入ApplicationContext类型 或者 实现ApplicationContextAware")]),a._v(" "),s("p",[a._v("在spring-mvc中的WebMvcConfigurer.addCorsMappings()中可以做到跨域, 但一旦和SpringSecurity结合使用就不能正常运行,这个结果是因为SpringSecurity注册的过滤器拦截了跨域的预检请求(到不了mvc中)")]),a._v(" "),s("p",[a._v("1.不使用mvc的配置,而是通过CorsFilter的Bean")]),a._v(" "),s("p",[a._v("2.httpSecurity.addFilterBefore(corsFilter, JwtAuthenticationTokenFilter.class);")]),a._v(" "),s("p",[a._v('@PreAuthorize("permitAll")注解还是会拦截401')]),a._v(" "),s("p",[a._v("内部机制问题,由httpSecurity.anyRequest().authenticated()引起")]),a._v(" "),s("p",[a._v("有点莫名其妙..., 网上的回答更加莫名其妙...")]),a._v(" "),s("p",[a._v("配置文件加载的优先级（由高到低）")]),a._v(" "),s("p",[s("code",[a._v("bootstrap.properties ->bootstrap.yml -> application.properties -> application.yml")])]),a._v(" "),s("p",[a._v("Import")]),a._v(" "),s("p",[a._v("(1) @Import注解")]),a._v(" "),s("p",[a._v("(2) src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports")]),a._v(" "),s("p",[a._v("@RefreshScope 配置刷新")]),a._v(" "),s("p",[a._v("Lombok @RequiredArgsConstructor")]),a._v(" "),s("p",[a._v("nacos服务注册 --spring.cloud.nacos.discovery.register-enabled=false")]),a._v(" "),s("p",[a._v("swagger版本问题")]),a._v(" "),s("p",[a._v("springboot2.5不需要额外配置")]),a._v(" "),s("p",[a._v("springboot2.6以上报错,需要额外补入MVC配置,二选一")]),a._v(" "),s("p",[a._v("​\t@EnableMVC")]),a._v(" "),s("p",[a._v("​\tspring.mvc.pathmatch.strategy="),s("em",[a._v("ant_path_matcher")])]),a._v(" "),s("p",[a._v("Binding注解, 在不注解时,默认当URL参数处理;当然form表单会有额外;")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th"),a._v(" "),s("th")])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("FromQuery")]),a._v(" "),s("td",[a._v("RequestParam ("),s("s",[a._v("PathParam")]),a._v(")")])]),a._v(" "),s("tr",[s("td",[a._v("FromRoute")]),a._v(" "),s("td",[a._v("PathVariable")])]),a._v(" "),s("tr",[s("td",[a._v("FromHeader")]),a._v(" "),s("td",[a._v("RequestHeader")])]),a._v(" "),s("tr",[s("td",[a._v("FromBody")]),a._v(" "),s("td",[a._v("RequestBody")])]),a._v(" "),s("tr",[s("td",[a._v("FromForm")]),a._v(" "),s("td",[a._v("RequestParam 或缺省?")])])])]),a._v(" "),s("p",[a._v("HttpContext")]),a._v(" "),s("p",[a._v("通过请求参数中获取 Request 对象；")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("index")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("HttpServletRequest")]),a._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("通过 RequestContextHolder 获取 Request 对象；")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ServletRequestAttributes")]),a._v(" servletRequestAttributes "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ServletRequestAttributes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("RequestContextHolder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getRequestAttributes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("HttpServletRequest")]),a._v(" request "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" servletRequestAttributes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("通过自动注入获取 Request 对象;")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Autowired")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("HttpServletRequest")]),a._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 自动注入 request 对象")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h2",{attrs:{id:"测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[a._v("#")]),a._v(" 测试")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@SpringBootTest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("classes "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ConfigurationExampleApplication")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" properties "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"--mail.enabled=true"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"--spring.profiles.active=dev,extra"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"注释链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注释链接"}},[a._v("#")]),a._v(" 注释链接")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("{@link SensitiveJsonSerializer}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);