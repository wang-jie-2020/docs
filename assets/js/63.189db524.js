(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{354:function(s,a,t){"use strict";t.r(a);var e=t(1),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh"}},[s._v("#")]),s._v(" ssh")]),s._v(" "),a("h2",{attrs:{id:"windows上的ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows上的ssh"}},[s._v("#")]),s._v(" windows上的ssh")]),s._v(" "),a("p",[s._v("个人版中通过store可以下载适配于windows的ssh.exe或者直接作为可选功能在程序管理中启用.")]),s._v(" "),a("p",[s._v("server版安装离线包或者安装git")]),s._v(" "),a("h2",{attrs:{id:"ssh远程执行的坑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh远程执行的坑"}},[s._v("#")]),s._v(" SSH远程执行的坑")]),s._v(" "),a("p",[s._v("场景:通过机器A远程机器B,执行A中的脚本("),a("strong",[s._v("前提:机器B未作任何配置,非root")]),s._v(")")]),s._v(" "),a("p",[s._v("问题:执行sudo命令'[sudo: no tty present and no askpass program specified]'")]),s._v(" "),a("p",[s._v("查询资料的理解是当SSH远程执行时默认不分配模拟终端,通过-t以及-tt可以强制分配")]),s._v(" "),a("p",[s._v("不能执行的写法:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不行")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" name@ip "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\n      echo "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$para")]),s._v("\n      sudo docker ps\nEOF")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不行,注意此种方式需要传递参数")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" name@ip "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sudo bash -s'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" ./deploy_build.sh para1 para2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("可以执行的写法")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" name@ip "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\n      echo '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$para")]),s._v('\n      sudo docker ps\n    "')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"sudo免密切换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sudo免密切换"}},[s._v("#")]),s._v(" sudo免密切换")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("切换目录到"),a("em",[s._v("etc")]),s._v("下")])]),s._v(" "),a("li",[a("p",[s._v("查看"),a("em",[s._v("sudoers")]),s._v("权限")])]),s._v(" "),a("li",[a("p",[s._v("修改"),a("em",[s._v("sudoers")]),s._v("权限,加入可写权限")])]),s._v(" "),a("li",[a("p",[s._v("打开修改文件配置")]),s._v(" "),a("p",[a("code",[s._v("xx ALL=(ALL) NOPASSWD: ALL")])])]),s._v(" "),a("li",[a("p",[s._v("修改"),a("em",[s._v("sudoers")]),s._v("权限删除可写权限")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" sudoers\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +w sudoers\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" sudoers\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" sudoers\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"ssh免密登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh免密登录"}},[s._v("#")]),s._v(" ssh免密登录")]),s._v(" "),a("p",[s._v("sshpass这种还是不考虑,正统的方式是写公钥")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ssh-keygen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v("\nssh-copy-id "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" ~/.ssh/id_rsa.pub user@server.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);